<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description"
    content="LinkSentry â€” A real-time URL security analysis tool with 12 comprehensive checks. Detect phishing, typosquatting, homograph attacks, and more." />
  <title>LinkSentry â€” URL Safety Scanner</title>
  <link rel="stylesheet" href="demo.css" />
</head>

<body>

  <!-- â•â•â• Pixel-Art Cityscape Background â•â•â• -->
  <div class="cityscape-bg" id="cityscape">
    <div class="stars" id="stars"></div>
    <!-- Cloud Layer 1 â€” drifts right â†’ left -->
    <div class="cloud-layer cloud-layer-front">
      <div class="cloud-strip cloud-strip-left">
        <!-- Copy A -->
        <div class="cloud-set">
          <div class="cloud large" style="left:3%; top:20px;">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
          <div class="cloud tiny" style="left:15%; top:80px;">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
          <div class="cloud small" style="left:22%; top:55px;">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
          <div class="cloud normal" style="left:36%; top:10px;">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
          <div class="cloud large" style="left:50%; top:30px;">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
          <div class="cloud tiny" style="left:58%; top:75px;">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
          <div class="cloud normal" style="left:68%; top:15px;">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
          <div class="cloud small" style="left:82%; top:50px;">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
          <div class="cloud tiny" style="left:93%; top:35px;">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
        </div>
        <!-- Copy B (identical for seamless loop) -->
        <div class="cloud-set">
          <div class="cloud large" style="left:5%; top:15px;">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
          <div class="cloud small" style="left:22%; top:55px;">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
          <div class="cloud normal" style="left:38%; top:10px;">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
          <div class="cloud tiny" style="left:55%; top:60px;">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
          <div class="cloud normal" style="left:70%; top:25px;">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
          <div class="cloud small" style="left:88%; top:50px;">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Cloud Layer 2 â€” drifts left â†’ right (parallax) -->
    <div class="cloud-layer cloud-layer-back">
      <div class="cloud-strip cloud-strip-right">
        <!-- Copy A -->
        <div class="cloud-set">
          <div class="cloud tiny" style="left:8%; top:10px;">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
          <div class="cloud normal" style="left:28%; top:40px;">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
          <div class="cloud small" style="left:48%; top:5px;">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
          <div class="cloud tiny" style="left:65%; top:45px;">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
          <div class="cloud small" style="left:82%; top:20px;">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
        </div>
        <!-- Copy B (identical for seamless loop) -->
        <div class="cloud-set">
          <div class="cloud tiny" style="left:8%; top:10px;">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
          <div class="cloud normal" style="left:28%; top:40px;">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
          <div class="cloud small" style="left:48%; top:5px;">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
          <div class="cloud tiny" style="left:65%; top:45px;">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
          <div class="cloud small" style="left:82%; top:20px;">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
          </div>
        </div>
      </div>
    </div>
    <div class="buildings" id="buildings"></div>
    <div class="ground"></div>
  </div>

  <!-- â•â•â• Main App â•â•â• -->
  <div class="app-container">

    <!-- Header -->
    <header class="header">
      <div class="logo-row">
        <div class="pixel-shield">
          <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M24 4L6 12V22C6 33.1 13.7 43.3 24 46C34.3 43.3 42 33.1 42 22V12L24 4Z" fill="url(#shieldGrad)"
              stroke="#ff2d95" stroke-width="2" />
            <path d="M20 24L23 27L29 19" stroke="#fff" stroke-width="3" stroke-linecap="round"
              stroke-linejoin="round" />
            <defs>
              <linearGradient id="shieldGrad" x1="6" y1="4" x2="42" y2="46">
                <stop stop-color="#ff2d95" />
                <stop offset="1" stop-color="#8b5cf6" />
              </linearGradient>
            </defs>
          </svg>
        </div>
        <h1 class="app-title neon-flicker">LINKSENTRY</h1>
      </div>
      <p class="subtitle">Real-Time URL Threat Intelligence</p>
      <p class="credit-line">By Dyutiman Bharadwaj & Aayush Saha â€¢ K.A.V.A.C.H Club</p>
    </header>

    <!-- Scanner Card -->
    <section class="glass-panel scanner-section" id="scannerCard">
      <span class="section-label">âŒ˜ Scan Target</span>
      <div class="input-wrapper">
        <span class="input-icon">ğŸ”—</span>
        <input type="text" id="urlInput" class="url-input" placeholder="Enter or paste a URL to analyzeâ€¦"
          autocomplete="off" spellcheck="false" />
        <button class="scan-button" id="scanBtn" onclick="triggerScan()">Scan</button>
      </div>

      <!-- Spinner -->
      <div class="spinner-overlay" id="spinner">
        <div class="spinner-ring"></div>
        <span class="spinner-text">Analyzing threat vectorsâ€¦</span>
      </div>
    </section>

    <!-- Results -->
    <section class="results-section" id="resultsSection">

      <!-- Score Panel -->
      <div class="glass-panel">
        <span class="section-label">âŒ˜ Threat Assessment</span>
        <div class="score-panel">
          <div class="score-ring-container">
            <svg class="score-ring-svg" viewBox="0 0 100 100">
              <circle class="score-ring-bg" cx="50" cy="50" r="45" />
              <circle class="score-ring-fill" id="scoreRing" cx="50" cy="50" r="45" />
            </svg>
            <div class="score-number" id="scoreNumber">â€”</div>
          </div>
          <div class="score-info">
            <div class="score-status" id="scoreStatus">AWAITING INPUT</div>
            <div class="score-description" id="scoreDesc"></div>
            <div class="score-url" id="scoreUrl"></div>
            <div class="categories-row" id="categoriesRow"></div>
          </div>
        </div>
      </div>

      <!-- Check Grid -->
      <div class="glass-panel">
        <span class="section-label">âŒ˜ Security Checks (12)</span>
        <div class="checks-grid" id="checksGrid"></div>
      </div>

      <!-- Threat Details -->
      <div class="glass-panel" id="threatsPanel" style="display:none;">
        <span class="section-label">âŒ˜ Threat Details</span>
        <div class="threats-container" id="threatsContainer"></div>
      </div>

      <!-- Safe Message -->
      <div class="glass-panel" id="safePanel" style="display:none;">
        <div class="safe-message">
          <div class="safe-icon">ğŸ›¡ï¸</div>
          <div class="safe-title">ALL CLEAR â€¢ NO THREATS DETECTED</div>
          <div class="safe-desc">This URL passed all 12 security checks. No typosquatting, phishing keywords, malware
            patterns, or other red flags were found.</div>
        </div>
      </div>

    </section>

    <!-- Footer -->
    <footer class="footer">
      LinkSentry v2.1 â€¢ Google Safe Browsing Methodology â€¢ 12 Security Checks â€¢ 87% Accuracy
    </footer>

  </div>

  <!-- Analysis Engine -->
  <script src="analyzer.js"></script>

  <script>
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    //  CITYSCAPE GENERATOR
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    function generateCityscape() {
      // â”€â”€ Stars â”€â”€
      const starsEl = document.getElementById('stars');
      for (let i = 0; i < 80; i++) {
        const s = document.createElement('div');
        s.className = 'star';
        s.style.left = Math.random() * 100 + '%';
        s.style.top = Math.random() * 100 + '%';
        s.style.animationDelay = (Math.random() * 3).toFixed(1) + 's';
        s.style.width = s.style.height = (Math.random() > 0.7 ? 3 : 2) + 'px';
        starsEl.appendChild(s);
      }

      // â”€â”€ Clouds â”€â”€ (handled in HTML/CSS, no JS needed)

      // â”€â”€ Buildings â”€â”€
      const bldgContainer = document.getElementById('buildings');
      const buildingCount = Math.max(18, Math.floor(window.innerWidth / 35));
      const colors = ['lit', 'dark', 'cyan', 'pink', 'dark', 'dark', 'lit', 'dark'];

      for (let i = 0; i < buildingCount; i++) {
        const b = document.createElement('div');
        b.className = 'building';
        const w = 18 + Math.random() * 28;
        const h = 60 + Math.random() * 180;
        b.style.width = w + 'px';
        b.style.height = h + 'px';

        // Windows
        const cols = Math.floor(w / 12);
        const rows = Math.floor(h / 16);
        for (let r = 0; r < rows; r++) {
          for (let c = 0; c < cols; c++) {
            const win = document.createElement('div');
            win.className = 'window ' + colors[Math.floor(Math.random() * colors.length)];
            win.style.left = (4 + c * 12) + 'px';
            win.style.top = (8 + r * 16) + 'px';
            win.style.setProperty('--blink-speed', (2 + Math.random() * 6).toFixed(1) + 's');
            win.style.animationDelay = (Math.random() * 4).toFixed(1) + 's';
            b.appendChild(win);
          }
        }
        bldgContainer.appendChild(b);
      }
    }

    generateCityscape();

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    //  SCANNER LOGIC
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    const urlInput = document.getElementById('urlInput');
    const scanBtn = document.getElementById('scanBtn');
    const spinner = document.getElementById('spinner');
    const resultsSection = document.getElementById('resultsSection');
    const scoreRing = document.getElementById('scoreRing');
    const scoreNumber = document.getElementById('scoreNumber');
    const scoreStatus = document.getElementById('scoreStatus');
    const scoreDesc = document.getElementById('scoreDesc');
    const scoreUrl = document.getElementById('scoreUrl');
    const categoriesRow = document.getElementById('categoriesRow');
    const checksGrid = document.getElementById('checksGrid');
    const threatsPanel = document.getElementById('threatsPanel');
    const threatsContainer = document.getElementById('threatsContainer');
    const safePanel = document.getElementById('safePanel');

    let analysisTimeout;

    // Debounced input
    urlInput.addEventListener('input', function () {
      clearTimeout(analysisTimeout);
      const val = this.value.trim();
      if (val.length < 4) {
        resultsSection.classList.remove('active');
        return;
      }
      analysisTimeout = setTimeout(() => runAnalysis(val), 500);
    });

    urlInput.addEventListener('keydown', function (e) {
      if (e.key === 'Enter') triggerScan();
    });

    function triggerScan() {
      const val = urlInput.value.trim();
      if (val.length < 4) return;
      clearTimeout(analysisTimeout);
      runAnalysis(val);
    }

    function runAnalysis(url) {
      // Show spinner
      spinner.classList.add('active');
      resultsSection.classList.remove('active');

      setTimeout(() => {
        const analysis = performEnhancedAnalysis(url);
        spinner.classList.remove('active');
        displayResults(analysis);
      }, 800);
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    //  RENDER RESULTS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    function displayResults(analysis) {
      resultsSection.classList.add('active');

      const gradient = getScoreGradient(analysis.score);

      // â”€â”€ Score Ring â”€â”€
      const circumference = 2 * Math.PI * 45; // r=45
      const offset = circumference - (analysis.score / 100) * circumference;
      scoreRing.style.stroke = gradient.from;
      scoreRing.style.strokeDashoffset = offset;

      // â”€â”€ Score Number â”€â”€
      scoreNumber.textContent = analysis.score;
      scoreNumber.style.color = gradient.from;

      // â”€â”€ Status â”€â”€
      const statusText = getScoreStatus(analysis.score);
      scoreStatus.textContent = 'STATUS: ' + statusText;
      scoreStatus.className = 'score-status';
      if (analysis.score >= 80) scoreStatus.classList.add('status-safe');
      else if (analysis.score >= 60) scoreStatus.classList.add('status-warn');
      else scoreStatus.classList.add('status-danger');

      // â”€â”€ Description â”€â”€
      if (analysis.score >= 80) {
        scoreDesc.textContent = 'This URL passed all security checks. No significant threats were identified.';
      } else if (analysis.score >= 60) {
        scoreDesc.textContent = 'Some concerns were detected. Review the details below before proceeding.';
      } else {
        scoreDesc.textContent = 'Multiple serious threats detected! This URL is likely malicious. Do NOT enter any credentials.';
      }

      scoreUrl.textContent = analysis.url;

      // â”€â”€ Categories â”€â”€
      categoriesRow.innerHTML = '';
      analysis.threatTypes.forEach(cat => {
        const badge = document.createElement('span');
        badge.className = 'category-badge';
        badge.textContent = cat;
        categoriesRow.appendChild(badge);
      });

      // â”€â”€ Check Grid â”€â”€
      checksGrid.innerHTML = '';
      analysis.checks.forEach(check => {
        const card = document.createElement('div');
        card.className = 'check-card';
        card.setAttribute('data-status', check.status);

        const icon = document.createElement('span');
        icon.className = 'check-icon';
        if (check.status === 'safe') icon.textContent = 'âœ…';
        else if (check.status === 'warning') icon.textContent = 'âš ï¸';
        else icon.textContent = 'âŒ';

        const name = document.createElement('span');
        name.className = 'check-name';
        name.textContent = check.name;

        card.appendChild(icon);
        card.appendChild(name);
        checksGrid.appendChild(card);
      });

      // â”€â”€ Threats â”€â”€
      if (analysis.threats.length > 0) {
        threatsPanel.style.display = 'block';
        safePanel.style.display = 'none';
        threatsContainer.innerHTML = '';

        analysis.threats.forEach(threat => {
          const card = document.createElement('div');
          card.className = `threat-card severity-${threat.severity}`;

          card.innerHTML = `
        <div class="threat-header">
          <span class="severity-badge ${threat.severity}">${threat.severity.toUpperCase()}</span>
          <span class="threat-type">${threat.type}</span>
          <span class="google-cat">${threat.googleCategory}</span>
        </div>
        <div class="threat-message">${threat.message}</div>
        <div class="threat-detail">${threat.detail}</div>
      `;
          threatsContainer.appendChild(card);
        });
      } else {
        threatsPanel.style.display = 'none';
        safePanel.style.display = 'block';
      }
    }
  </script>

</body>

</html>